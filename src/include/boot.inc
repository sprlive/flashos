;---------- loader and kernel -----------
;待读入的扇区数
READ_SECTOR_COUNT	equ	4
;loader在磁盘中的起始LBA地址
LOADER_START_LBA	equ	0x02
;loader在内存中的起始地址
LOADER_BASE_ADDR	equ	0x900
KERNEL_START_SECTOR	equ 0x9
KERNEL_BIN_BASE_ADDR equ 0x70000
KERNEL_ENTRY_POINT	equ 0xc0001500

PAGE_DIR_TABLE_POS equ 0x100000

;---------- gdt 段描述符 -----------
DESC_G_4K			equ	00000000_10000000_00000000_00000000b	;23 G 段界限单位
DESC_D_32			equ	00000000_01000000_00000000_00000000b	;22 DB 16位or32位
DESC_L				equ	00000000_00000000_00000000_00000000b	;21 L 64位标记，此处为0
DESC_AVL			equ	00000000_00000000_00000000_00000000b	;20 AVL CPU不用此位
DESC_LIMIT_CODE2	equ	00000000_00001111_00000000_00000000b	;19-16 段界限第二部分
DESC_LIMIT_DATA2	equ	00000000_00001111_00000000_00000000b	;19-16 段界限第二部分
DESC_LIMIT_VIDEO2	equ	00000000_00000000_00000000_00000000b	;19-16 段界限第二部分
DESC_P				equ	00000000_00000000_10000000_00000000b	;15 P 是否在内存中
DESC_DPL_0			equ	00000000_00000000_00000000_00000000b	;14-13 DPL 特权级
DESC_DPL_1			equ	00000000_00000000_00100000_00000000b	;14-13 DPL 特权级
DESC_DPL_2			equ	00000000_00000000_01000000_00000000b	;14-13 DPL 特权级
DESC_DPL_3			equ	00000000_00000000_01100000_00000000b	;14-13 DPL 特权级
DESC_S_CODE			equ	00000000_00000000_00010000_00000000b	;12 S 是否为系统段
DESC_S_DATA			equ	00000000_00000000_00010000_00000000b	;12 S 是否为系统段
DESC_S_sys			equ	00000000_00000000_00000000_00000000b	;12 S 是否为系统段
DESC_TYPE_CODE		equ	00000000_00000000_00001000_00000000b	;11-8 TYPE 段类型（1000：代码段仅可执行）
DESC_TYPE_DATA		equ	00000000_00000000_00000010_00000000b	;11-8 TYPE 段类型（0010：数据段只读、向下扩展）

DESC_CODE_HIGH4		equ (0x00<<24)+DESC_G_4K+DESC_D_32+DESC_L+DESC_AVL+DESC_LIMIT_CODE2+DESC_P+DESC_DPL_0+DESC_S_CODE+DESC_TYPE_CODE+0x00
DESC_DATA_HIGH4		equ (0x00<<24)+DESC_G_4K+DESC_D_32+DESC_L+DESC_AVL+DESC_LIMIT_DATA2+DESC_P+DESC_DPL_0+DESC_S_DATA+DESC_TYPE_DATA+0x00
DESC_VIDEO_HIGH4	equ (0x00<<24)+DESC_G_4K+DESC_D_32+DESC_L+DESC_AVL+DESC_LIMIT_VIDEO2+DESC_P+DESC_DPL_0+DESC_S_DATA+DESC_TYPE_DATA+0x0b

;---------- gdt 选择子 -----------
RPL0				equ 00b
RPL1				equ 01b
RPL2				equ 10b
RPL3				equ 11b
TI_GDT				equ 000b
TI_LDT				equ 100b
